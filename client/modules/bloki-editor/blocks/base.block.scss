@use 'sass:math';
.draggable {
   // causes some artifacts in chrome. possibly cause of overlay or outline
   will-change: transform;
}
.block {
   z-index: 10;
   position: absolute;
   box-sizing: border-box;
   &:hover {
      .handy {
         fill: #9ca5ab;
      }
   }
   &.selected {
      z-index: 25;
      &::after {
         position: absolute;
         content: '';
         inset: -5px;
         border: 1px solid #e9e9e9;
         border-radius: 3px;
         z-index: -1;
      }
      .handy {
         fill: #9ca5ab;
      }
   }
   &.dragging {
      cursor: grabbing;
      user-select: none;
      .handy {
         fill: #7597ff;
      }
   }
   &.resizing {
      user-select: none;
      .sizedot {
         background: #4281fa !important;
      }
   }
   .overlay {
      position: absolute;
      inset: 0px;
   }
   // controls
   $stroke-width: 2px;
   $stroke-color: #ffa61f;
   $touch-area: 10px;
   .edge,
   .vert {
      position: absolute;
      fill: none;
      > path {
         stroke-linecap: round;
         stroke-width: $stroke-width;
         stroke: $stroke-color;
      }
      &.debug {
         background: rgba(255, 0, 0, 0.2);
      }
   }
   .vert {
      $vert-border-offset: 6px;
      $vert-total-offset: -$vert-border-offset - $touch-area - $stroke-width;

      position: absolute;
      width: 14px + $touch-area;
      height: 14px + $touch-area;

      &.nw {
         left: $vert-total-offset;
         top: $vert-total-offset;
         cursor: nwse-resize;
      }
      &.ne {
         right: $vert-total-offset;
         top: $vert-total-offset;
         cursor: nesw-resize;
      }
      &.se {
         right: $vert-total-offset;
         bottom: $vert-total-offset;
         cursor: nwse-resize;
      }
      &.sw {
         left: $vert-total-offset;
         bottom: $vert-total-offset;
         cursor: nesw-resize;
      }
   }
   .edge {
      $edge-offset: -5px;
      margin: auto;
      &.n, &.s {
         height: 3px + $touch-area;
         width: 26px;
      }
      &.w, &.e {
         width: 3px + $touch-area;
         height: 26px;
      }
      &.w {
         left: $edge-offset - $stroke-width - $touch-area;
         top: 0;
         bottom: 0;
         cursor: ew-resize;
      }
      &.n {
         top: $edge-offset - $touch-area - $stroke-width;
         left: 0;
         right: 0;
         cursor: ns-resize;
      }
      &.e {
         right: $edge-offset - $touch-area - $stroke-width;
         top: 0;
         bottom: 0;
         cursor: ew-resize;
      }
      &.s {
         bottom: $edge-offset - $touch-area - $stroke-width;
         left: 0;
         right: 0;
         cursor: ns-resize;
      }
   }
}
.handy-block {
   width: 24px;
   height: 30px;
   border-radius: 4px;
   transition: background 100ms linear;
   position: absolute;
   top: 0px;
   left: -30px;
   &:hover {
      background: #d1ecfe;
   }
   display: flex;
   justify-content: center;
   align-items: center;
   .handy {
      width: 24px;
      height: 24px;
      cursor: pointer;
      transition: fill 130ms linear;
      fill: transparent;
      &:hover {
         fill: #18a0fb !important;
      }
   }
}
